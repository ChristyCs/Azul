<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="shortcut icon" href="favicon.ico" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="js/game.js"></script>
    <script src="js/gameObject.js"></script>
</head>
<body>
<!-- put this in chrome > more tools > developer tools > apple iphone 5  -->
    <!--<div id="Canvas" style="width: 800px; height: 600px; background: #A7A7A7; top: 10%; left:25%; position:absolute;"></div>-->


    <div id="ontop-menu" style="">
            <!-- to remove menu: add 'visibility: hidden;' to style -->
    <h1> Hello world </h1>

    </div>

    <canvas id="viewport" height="320" width="568" style="background-color: rgb(200,220,255);"></canvas>
    

    <script>
    var c = document.getElementById("viewport");
    var ctx = c.getContext("2d");
    //resizes canvas to window size
    //ctx.canvas.width  = window.innerWidth;
    //ctx.canvas.height = window.innerHeight;
    
    ctx.font = "30px Bangla MN";
    ctx.fillText("Space Runner",200,100);

 ctx.font = "20px Bangla MN";
    ctx.fillText("Start Adventure",220,220);
    ctx.fillText("Exit",280,260);
    //links on these required

    </script>

    <script>       
    //
    $(document).ready(function(){
       //$('#viewport').css('background-color', 'rgb(158, 167, 184)')
        Game.initialize();
        var arr = [];
        var isLimit = false;
        var limit = 20;
        var numberOfSquares =1;


        // this won't work after the program runs for about 1 second
        $("#viewport").click(function(e){       
          if(arr.length < limit){
              arr.push(new gameObject(e.pageX, e.pageY));
          }
        });
        
        Game.run = (function(){
            var loops = 0, skipTicks = 5500/Game.fps,
            maxFrameSkip = 10,
            nextGameTick = (new Date).getTime();

            
            //This is supposed to make a "hill" of a random number of squares high squares
            

            
            return function(){
                loops = 0;
                
                while((new Date).getTime() > nextGameTick){
                    Game.update(arr);
                    nextGameTick += skipTicks;
                    loops++;
                }

                //deletes squares when they go out of screen
                for(var i = 0; i < arr.length; i++){
                    if(arr[i].x < -20){
                        arr.splice(i,1);
                        
                    }
                }
                numberOfSquares = Math.floor((Math.random()*5)+1);
                for(var i=0; i<numberOfSquares; i++){
                arr.push(new gameObject(500, (300-(i*20))));
                }


                Game.draw(arr);
            };
        })();
        
        (function(){
            var onEachFrame = function(cb){
                setInterval(cb, 1000/60);
            };
            
            window.onEachFrame = onEachFrame;
            
        })();
        window.onEachFrame(Game.run);
    });
    </script>
   
</body>
</html>
